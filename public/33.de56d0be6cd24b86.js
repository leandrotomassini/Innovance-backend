"use strict";(self.webpackChunkinnovance=self.webpackChunkinnovance||[]).push([[33],{9033:(vt,J,a)=>{a.r(J),a.d(J,{StudioModule:()=>ht});var m=a(6814),T=a(8109),e=a(5879),Y=a(4567),b=a(2296),v=a(617),q=a(2651),V=a(1274),C=a(9038),B=a(9014);function P(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"mat-list-item",13),e.NdJ("click",function(){e.CHM(t),e.oxw();const r=e.MAs(2);return e.KtG(r.toggle())}),e.TgZ(1,"mat-icon",14),e._uU(2),e.qZA(),e._uU(3),e.qZA()}if(2&o){const t=i.$implicit;e.Q6J("routerLink",t.url),e.xp6(1),e.Q6J("fontSet","material-icons-outlined"),e.xp6(1),e.Oqu(t.icon),e.xp6(1),e.hij(" ",t.label," ")}}const D=function(){return{width:"250"}};let E=(()=>{class o{constructor(t){this.authService=t,this.sidebarItems=[{label:"Cursos",icon:"subscriptions",url:"/studio/cursos"},{label:"Dashboard",icon:"apps",url:"/clases"}]}logout(){this.authService.logout()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Y.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-studio-layout"]],decls:36,vars:6,consts:[["fullscreen",""],["mode","push",3,"ngStyle"],["sidenav",""],[1,"spacer"],["mat-icon-button","",3,"click"],[3,"routerLink","click",4,"ngFor","ngForOf"],["color","accent"],["mat-icon-button","","aria-label","Mensajes",3,"routerLink"],["matBadgeColor","warn"],["mat-icon-button","",3,"routerLink"],["mat-icon-button",""],["matBadgeColor","warn","aria-hidden","false",3,"matBadge"],[1,"container"],[3,"routerLink","click"],["matListItemIcon","",3,"fontSet"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2)(3,"mat-toolbar")(4,"span"),e._uU(5,"Men\xfa"),e.qZA(),e._UZ(6,"span",3),e.TgZ(7,"button",4),e.NdJ("click",function(){e.CHM(r);const l=e.MAs(2);return e.KtG(l.toggle())}),e.TgZ(8,"mat-icon"),e._uU(9,"menu"),e.qZA()()(),e.TgZ(10,"mat-nav-list"),e.YNc(11,P,4,4,"mat-list-item",5),e.qZA()(),e.TgZ(12,"mat-toolbar",6)(13,"button",4),e.NdJ("click",function(){e.CHM(r);const l=e.MAs(2);return e.KtG(l.toggle())}),e.TgZ(14,"mat-icon"),e._uU(15,"menu"),e.qZA()(),e.TgZ(16,"span"),e._uU(17,"Innovance"),e.qZA(),e._UZ(18,"span",3),e.TgZ(19,"button",7)(20,"mat-icon",8),e._uU(21,"timeline"),e.qZA()(),e.TgZ(22,"button",9)(23,"mat-icon"),e._uU(24,"apps"),e.qZA()(),e.TgZ(25,"button",10)(26,"mat-icon",11),e._uU(27,"chat"),e.qZA()(),e.TgZ(28,"button",10)(29,"mat-icon"),e._uU(30,"notifications"),e.qZA()(),e.TgZ(31,"button",4),e.NdJ("click",function(){return n.logout()}),e.TgZ(32,"mat-icon"),e._uU(33,"logout"),e.qZA()()(),e.TgZ(34,"div",12),e._UZ(35,"router-outlet"),e.qZA()()}2&t&&(e.xp6(1),e.Q6J("ngStyle",e.DdM(5,D)),e.xp6(10),e.Q6J("ngForOf",n.sidebarItems),e.xp6(8),e.Q6J("routerLink","/panel-control"),e.xp6(3),e.Q6J("routerLink","/clases"),e.xp6(4),e.Q6J("matBadge",4))},dependencies:[m.sg,m.PC,T.lC,T.rH,b.RK,v.Hw,q.JX,q.TM,V.Ye,C.Hk,C.Tg,C.Yt,B.k],styles:["@media (min-width: 960px){.hide-on-desktop[_ngcontent-%COMP%]{display:none}}.mat-toolbar[_ngcontent-%COMP%]{background-color:#141b1f;color:#fff;border-bottom:1px solid black;box-shadow:0 2px 4px #0003}.container[_ngcontent-%COMP%]{padding:8% 2% 100%;background-color:#141b1f}"]}),o})();var d=a(5195),R=a(2509),f=a(4170),x=a(2032),u=a(5313),c=a(6223);function j(o,i){if(1&o&&(e.TgZ(0,"th",12),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Oqu(n.columnLabels[t])}}function H(o,i){if(1&o&&(e.ynx(0),e._UZ(1,"img",15),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.logo,e.LSH)}}function $(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.ALo(3,"slice"),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.AsE("",e.Dn7(3,2,t.description,0,50),"",t.description.length>50?"...":"","")}}function K(o,i){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",t[n]," ")}}function G(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td",13),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.openCourseForm(s.slug))}),e.YNc(1,H,2,1,"ng-container",14),e.YNc(2,$,4,6,"ng-container",14),e.YNc(3,K,2,1,"ng-container",14),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","logo"===t),e.xp6(1),e.Q6J("ngIf","description"===t),e.xp6(1),e.Q6J("ngIf","logo"!==t&&"description"!==t)}}function X(o,i){1&o&&(e.ynx(0,9),e.YNc(1,j,2,1,"th",10),e.YNc(2,G,4,3,"td",11),e.BQk()),2&o&&e.Q6J("matColumnDef",i.$implicit)}function z(o,i){1&o&&e._UZ(0,"tr",16)}function W(o,i){1&o&&e._UZ(0,"tr",17)}let ee=(()=>{class o{constructor(t,n){this.coursesService=t,this.router=n,this.courses=[],this.filteredCourses=[],this.displayedColumns=["logo","title","description","slug","actions"],this.filterValue="",this.columnLabels={logo:"Logo",title:"T\xedtulo",description:"Descripci\xf3n",slug:"Slug",actions:"Acciones"}}ngOnInit(){this.coursesService.findAll().subscribe(t=>{this.courses=t,this.applyFilter()})}applyFilter(){const t=this.filterValue.trim().toLowerCase();this.filteredCourses=""===t?this.courses:this.courses.filter(n=>n.title.toLowerCase().includes(t)||n.description.toLowerCase().includes(t)||n.slug.toLowerCase().includes(t))}openCourseForm(t){this.router.navigateByUrl(""==t?"/studio/cursos/nuevo-curso":`/studio/cursos/${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(R.N),e.Y36(T.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-courses-table"]],decls:14,vars:5,consts:[[1,"full-width"],[1,"search-input"],["type","text","matInput","","placeholder","Buscar curso...",1,"search-text",3,"ngModel","ngModelChange","input"],["mat-icon-button","","aria-label","Buscar",1,"search-icon"],["mat-stroked-button","","aria-label","Agregar nuevo curso",1,"mb-2",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","row-hover",3,"click",4,"matCellDef"],["mat-header-cell",""],["mat-cell","",1,"row-hover",3,"click"],[4,"ngIf"],["alt","Logo",1,"logo-img-small",3,"src"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"mat-form-field",0)(1,"div",1)(2,"input",2),e.NdJ("ngModelChange",function(s){return n.filterValue=s})("input",function(){return n.applyFilter()}),e.qZA(),e.TgZ(3,"button",3)(4,"mat-icon"),e._uU(5,"search"),e.qZA()()()(),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.openCourseForm("")}),e.TgZ(7,"mat-icon"),e._uU(8,"add"),e.qZA(),e._uU(9," Crear nuevo curso\n"),e.qZA(),e.TgZ(10,"table",5),e.YNc(11,X,3,1,"ng-container",6),e.YNc(12,z,1,0,"tr",7),e.YNc(13,W,1,0,"tr",8),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngModel",n.filterValue),e.xp6(8),e.Q6J("dataSource",n.filteredCourses),e.xp6(1),e.Q6J("ngForOf",n.displayedColumns),e.xp6(1),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[m.sg,m.O5,b.lW,b.RK,f.KE,v.Hw,x.Nt,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,c.Fj,c.JJ,c.On,m.OU],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.search-input[_ngcontent-%COMP%]{display:flex;align-items:center}.search-text[_ngcontent-%COMP%]{flex:1;border:none;box-shadow:none}.search-icon[_ngcontent-%COMP%]{margin-left:8px}.row-hover[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}.logo-img-small[_ngcontent-%COMP%]{max-width:35px;max-height:35px;border-radius:50%}"]}),o})(),te=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-courses"]],decls:12,vars:1,consts:[[1,"grid","p-3"],[1,"col-12","md:col-12","lg:col-12"],[1,"p-3","d-flex","align-items-center","justify-content-center"],[1,"mr-2"],["matListItemIcon","",3,"fontSet"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-header",2)(4,"div",3)(5,"mat-icon",4),e._uU(6," subscriptions "),e.qZA()(),e.TgZ(7,"div")(8,"mat-card-title"),e._uU(9,"Cursos"),e.qZA()()(),e.TgZ(10,"mat-card-content"),e._UZ(11,"app-courses-table"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("fontSet","material-icons-outlined"))},dependencies:[v.Hw,C.Yt,d.a8,d.dn,d.dk,d.n5,ee]}),o})(),oe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-school-table"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"school-table works!"),e.qZA())}}),o})(),ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-schools"]],decls:12,vars:1,consts:[[1,"grid","p-3"],[1,"col-12","md:col-12","lg:col-12"],[1,"p-3","d-flex","align-items-center","justify-content-center"],[1,"mr-2"],["matListItemIcon","",3,"fontSet"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-header",2)(4,"div",3)(5,"mat-icon",4),e._uU(6,"school"),e.qZA()(),e.TgZ(7,"div")(8,"mat-card-title"),e._uU(9,"Escuelas"),e.qZA()()(),e.TgZ(10,"mat-card-content"),e._UZ(11,"app-school-table"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("fontSet","material-icons-outlined"))},dependencies:[v.Hw,C.Yt,d.a8,d.dn,d.dk,d.n5,oe]}),o})(),ie=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-routes-table"]],decls:1,vars:0,template:function(t,n){1&t&&e._uU(0,"routes talbe\n")}}),o})(),re=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-routes-courses"]],decls:12,vars:1,consts:[[1,"grid","p-3"],[1,"col-12","md:col-12","lg:col-12"],[1,"p-3","d-flex","align-items-center","justify-content-center"],[1,"mr-2"],["matListItemIcon","",3,"fontSet"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-header",2)(4,"div",3)(5,"mat-icon",4),e._uU(6,"routes"),e.qZA()(),e.TgZ(7,"div")(8,"mat-card-title"),e._uU(9,"Rutas de aprendizaje"),e.qZA()()(),e.TgZ(10,"mat-card-content"),e._UZ(11,"app-routes-table"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("fontSet","material-icons-outlined"))},dependencies:[v.Hw,C.Yt,d.a8,d.dn,d.dk,d.n5,ie]}),o})();var se=a(7398),h=a(8459),L=a(9413),S=a(2939),_=a(7700),F=a(2753);const ce=["myEditor"];function le(o,i){if(1&o&&e._UZ(0,"img",16),2&o){const t=e.oxw();let n;e.Q6J("src",null==(n=t.courseForm.get("logo"))?null:n.value,e.LSH)}}function ae(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Ingrese un t\xedtulo v\xe1lido"),e.qZA())}function ue(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Ingrese una descripci\xf3n v\xe1lida"),e.qZA())}function de(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Ingrese un slug v\xe1lido"),e.qZA())}function me(o,i){1&o&&(e.TgZ(0,"mat-hint"),e._uU(1,"Ten en cuenta siempre usar solo letras normales y guiones (-)"),e.qZA())}function pe(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Ingrese una URL v\xe1lida"),e.qZA())}function _e(o,i){1&o&&(e.TgZ(0,"mat-hint"),e._uU(1,"Ingrese una URL v\xe1lida"),e.qZA())}function fe(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Ingrese una URL v\xe1lida"),e.qZA())}function ge(o,i){1&o&&(e.TgZ(0,"mat-hint"),e._uU(1,"Ingrese una URL v\xe1lida"),e.qZA())}const Ce=function(){return[]},ve=function(o){return{height:200,menubar:!1,plugins:o,toolbar:"undo redo | formatselect | bold italic backcolor | \n         alignleft aligncenter alignright alignjustify | \n         bullist numlist outdent indent | removeformat | help"}};let Ze=(()=>{class o{constructor(t,n,r,s,l){this.fb=t,this.courseService=n,this.router=r,this.activatedRoute=s,this.snackBar=l,this.courseSlug="",this.apiKey=L.a.tinyApi,this.courseForm=this.fb.group({title:["",[c.kI.required]],description:["",[c.kI.required]],slug:["",[c.kI.required,c.kI.pattern(/^[a-zA-Z\\\\-]+$/)]],logo:["",[c.kI.required]],frontPage:["",[c.kI.required]]})}ngOnInit(){"nuevo-curso"!==this.courseSlug&&this.courseService.findBySlug(this.courseSlug).subscribe(t=>{this.course=t,this.courseForm.patchValue(t)})}saveCourse(){const t=this.courseForm.value;"nuevo-curso"!==this.courseSlug?this.courseService.updateById(this.course.idCourse,t).subscribe(()=>{this.router.navigate([`/studio/cursos/${this.courseSlug}`]),this.showUpdateSuccessToast()}):this.courseService.create(t).subscribe(n=>{this.router.navigateByUrl(`/studio/cursos/${n.slug}`).then(()=>{window.location.reload(),this.showCreateSuccessToast()})})}showUpdateSuccessToast(){this.snackBar.open("Curso actualizado correctamente","OK",{duration:3e3})}showCreateSuccessToast(){this.snackBar.open("Curso creado correctamente","OK",{duration:3e3})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(h.No),e.Y36(T.F0),e.Y36(T.gz),e.Y36(S.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-course-form"]],viewQuery:function(t,n){if(1&t&&e.Gf(ce,5),2&t){let r;e.iGM(r=e.CRH())&&(n.myEditor=r.first)}},inputs:{courseSlug:"courseSlug"},decls:36,vars:18,consts:[[1,"title-course-container"],["alt","Foto","class","course-logo-img",3,"src",4,"ngIf"],["mat-dialog-title","",2,"text-align","center"],["mat-dialog-content",""],[3,"formGroup","ngSubmit"],[1,"full-width"],["matInput","","placeholder","T\xedtulo para el curso...","formControlName","title"],[4,"ngIf"],["formControlName","description",3,"apiKey","init"],["myEditor",""],[1,"full-width",2,"margin-top","10px"],["matInput","","placeholder","URL para el curso, sin la barra diagonal '/', por ejemplo: 'historia-dinero'.","formControlName","slug"],["matInput","","placeholder","Puedes subir el logo del curso en este enlace (<https://imgur.com/>)...","formControlName","logo"],["matInput","","placeholder","Puedes subir la portada del curso en este enlace (<https://imgur.com/>)...","formControlName","frontPage"],[1,"button-row"],["mat-button","","color","primary","type","submit",3,"disabled"],["alt","Foto",1,"course-logo-img",3,"src"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,le,1,1,"img",1),e.TgZ(2,"h2",2),e._uU(3),e.qZA()(),e.TgZ(4,"div",3)(5,"form",4),e.NdJ("ngSubmit",function(){return n.saveCourse()}),e.TgZ(6,"mat-form-field",5)(7,"mat-label"),e._uU(8,"T\xedtulo del curso:"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,ae,2,0,"mat-error",7),e.qZA(),e.TgZ(11,"div"),e._UZ(12,"editor",8,9),e.qZA(),e.YNc(14,ue,2,0,"mat-error",7),e.TgZ(15,"mat-form-field",10)(16,"mat-label"),e._uU(17,"Slug:"),e.qZA(),e._UZ(18,"input",11),e.YNc(19,de,2,0,"mat-error",7),e.YNc(20,me,2,0,"mat-hint",7),e.qZA(),e.TgZ(21,"mat-form-field",5)(22,"mat-label"),e._uU(23,"Logo url:"),e.qZA(),e._UZ(24,"input",12),e.YNc(25,pe,2,0,"mat-error",7),e.YNc(26,_e,2,0,"mat-hint",7),e.qZA(),e.TgZ(27,"mat-form-field",5)(28,"mat-label"),e._uU(29,"Link de la portada del curso:"),e.qZA(),e._UZ(30,"input",13),e.YNc(31,fe,2,0,"mat-error",7),e.YNc(32,ge,2,0,"mat-hint",7),e.qZA(),e.TgZ(33,"div",14)(34,"button",15),e._uU(35),e.qZA()()()()),2&t){let r,s,l,p,g,Z,I,w,A,U;e.xp6(1),e.Q6J("ngIf",""!==(null==(r=n.courseForm.get("logo"))?null:r.value)),e.xp6(2),e.hij(" ",null!=(s=n.courseForm.get("title"))&&s.value?null==(s=n.courseForm.get("title"))?null:s.value:"Nuevo curso"," "),e.xp6(2),e.Q6J("formGroup",n.courseForm),e.xp6(5),e.Q6J("ngIf",(null==(l=n.courseForm.get("title"))?null:l.invalid)&&(null==(l=n.courseForm.get("title"))?null:l.touched)),e.xp6(2),e.Q6J("apiKey",n.apiKey)("init",e.VKq(16,ve,e.DdM(15,Ce))),e.xp6(2),e.Q6J("ngIf",(null==(p=n.courseForm.get("description"))?null:p.invalid)&&(null==(p=n.courseForm.get("description"))?null:p.touched)),e.xp6(5),e.Q6J("ngIf",(null==(g=n.courseForm.get("slug"))?null:g.invalid)&&(null==(g=n.courseForm.get("slug"))?null:g.touched)),e.xp6(1),e.Q6J("ngIf",(null==(Z=n.courseForm.get("slug"))?null:Z.touched)&&!(null!=(Z=n.courseForm.get("slug"))&&Z.invalid)),e.xp6(5),e.Q6J("ngIf",(null==(I=n.courseForm.get("logo"))?null:I.invalid)&&(null==(I=n.courseForm.get("logo"))?null:I.touched)),e.xp6(1),e.Q6J("ngIf",(null==(w=n.courseForm.get("logo"))?null:w.touched)&&!(null!=(w=n.courseForm.get("logo"))&&w.invalid)),e.xp6(5),e.Q6J("ngIf",(null==(A=n.courseForm.get("frontPage"))?null:A.invalid)&&(null==(A=n.courseForm.get("frontPage"))?null:A.touched)),e.xp6(1),e.Q6J("ngIf",(null==(U=n.courseForm.get("frontPage"))?null:U.touched)&&!(null!=(U=n.courseForm.get("frontPage"))&&U.invalid)),e.xp6(2),e.Q6J("disabled",n.courseForm.invalid),e.xp6(1),e.Oqu("nuevo-curso"===n.courseSlug?"Crear curso":"Actualizar curso")}},dependencies:[m.O5,b.lW,f.KE,f.hX,f.bx,f.TO,x.Nt,_.uh,_.xY,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,F.PG],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.course-logo-img[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;margin-bottom:5px}.title-course-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-items:center}"]}),o})();var Te=a(3519),N=a.n(Te),be=a(973);function Ie(o,i){if(1&o&&(e.TgZ(0,"th",11),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Oqu(n.columnLabels[t])}}function xe(o,i){if(1&o&&(e.ynx(0),e._UZ(1,"img",14),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.s9C("src",t.imgUrl,e.LSH)}}function Se(o,i){1&o&&(e.TgZ(0,"mat-icon"),e._uU(1,"done"),e.qZA())}function ye(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",15),e._uU(2),e.YNc(3,Se,2,0,"mat-icon",13),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.user.fullName," "),e.xp6(1),e.Q6J("ngIf",t.isSelected)}}function Fe(o,i){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",t[n]," ")}}function we(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.addInstructor(s))}),e.YNc(1,xe,2,1,"ng-container",13),e.YNc(2,ye,4,2,"ng-container",13),e.YNc(3,Fe,2,1,"ng-container",13),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","imgUrl"===t),e.xp6(1),e.Q6J("ngIf","fullName"===t),e.xp6(1),e.Q6J("ngIf","imgUrl"!==t&&"fullName"!==t)}}function Ae(o,i){1&o&&(e.ynx(0,8),e.YNc(1,Ie,2,1,"th",9),e.YNc(2,we,4,3,"td",10),e.BQk()),2&o&&e.Q6J("matColumnDef",i.$implicit)}function Ue(o,i){1&o&&e._UZ(0,"tr",16)}function Ne(o,i){1&o&&e._UZ(0,"tr",17)}let ke=(()=>{class o{constructor(t,n,r,s){this.instructorService=t,this.courseInstructorService=n,this.snackBar=r,this.data=s,this.instructors=[],this.filteredInstructors=[],this.filterValue="",this.columnLabels={imgUrl:"Foto",fullName:"Nombre Completo",title:"T\xedtulo"},this.displayedColumns=Object.keys(this.columnLabels)}ngOnInit(){console.log("ID del curso:",this.data.idCourse),this.instructorService.findAll().subscribe(t=>{this.instructors=t.map(n=>({...n,isSelected:!1})),this.loadCourseInstructors(),this.applyFilter()})}loadCourseInstructors(){this.courseInstructorService.findByCourseId(this.data.idCourse).subscribe(t=>{t.forEach(n=>{this.instructors.forEach(r=>{n.instructor.idInstructor===r.idInstructor&&(r.isSelected=!0)})})})}applyFilter(){const t=this.filterValue.trim().toLowerCase();this.filteredInstructors=""===t?this.instructors:this.instructors.filter(n=>n.title.toLowerCase().includes(t)||n.user.fullName.toLowerCase().includes(t))}addInstructor(t){t.isSelected||this.courseInstructorService.create(this.data.idCourse,t.idInstructor).subscribe(()=>{t.isSelected=!0,this.showSnackBar("Instructor agregado al curso")})}showSnackBar(t){this.snackBar.open(t,"OK",{duration:3e3})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(be.u),e.Y36(h.cP),e.Y36(S.ux),e.Y36(_.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-instructors-course-list-add"]],decls:10,vars:5,consts:[[1,"full-width"],[1,"search-input"],["type","text","matInput","","placeholder","Buscar instructor...",1,"search-text",3,"ngModel","ngModelChange","input"],["mat-icon-button","","aria-label","Buscar",1,"search-icon"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","row-hover",3,"click",4,"matCellDef"],["mat-header-cell",""],["mat-cell","",1,"row-hover",3,"click"],[4,"ngIf"],["alt","Foto",1,"profile-img",3,"src"],[1,"name-container"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"mat-form-field",0)(1,"div",1)(2,"input",2),e.NdJ("ngModelChange",function(s){return n.filterValue=s})("input",function(){return n.applyFilter()}),e.qZA(),e.TgZ(3,"button",3)(4,"mat-icon"),e._uU(5,"search"),e.qZA()()()(),e.TgZ(6,"table",4),e.YNc(7,Ae,3,1,"ng-container",5),e.YNc(8,Ue,1,0,"tr",6),e.YNc(9,Ne,1,0,"tr",7),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngModel",n.filterValue),e.xp6(4),e.Q6J("dataSource",n.filteredInstructors),e.xp6(1),e.Q6J("ngForOf",n.displayedColumns),e.xp6(1),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[m.sg,m.O5,b.RK,f.KE,v.Hw,x.Nt,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,c.Fj,c.JJ,c.On],styles:[".full-width[_ngcontent-%COMP%]{width:100%!important}.search-input[_ngcontent-%COMP%]{display:flex;align-items:center}.search-text[_ngcontent-%COMP%]{flex:1;border:none;box-shadow:none}.search-icon[_ngcontent-%COMP%]{margin-left:8px}.row-hover[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}.profile-img[_ngcontent-%COMP%]{width:32px!important;height:32px!important;border-radius:50%!important}.name-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-content:center}"]}),o})();var Je=a(1034);function qe(o,i){if(1&o&&(e.TgZ(0,"th",12),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Oqu(n.columnLabels[t])}}function Le(o,i){if(1&o&&(e.ynx(0),e._UZ(1,"img",15),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.instructor.imgUrl,e.LSH)}}function Qe(o,i){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.instructor.user.fullName," ")}}function Oe(o,i){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.instructor.title," ")}}function Me(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",16)(2,"mat-icon",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.removeInstructor(r.idCourseInstructor,r.instructor.user.fullName))}),e._uU(3," do_not_disturb_on "),e.qZA(),e.TgZ(4,"span"),e._uU(5," Quitar "),e.qZA()(),e.BQk()}2&o&&(e.xp6(2),e.Q6J("fontSet","material-icons-outlined"))}function Ye(o,i){if(1&o&&(e.TgZ(0,"td",13),e.YNc(1,Le,2,1,"ng-container",14),e.YNc(2,Qe,2,1,"ng-container",14),e.YNc(3,Oe,2,1,"ng-container",14),e.YNc(4,Me,6,1,"ng-container",14),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","imgUrl"===t),e.xp6(1),e.Q6J("ngIf","fullName"===t),e.xp6(1),e.Q6J("ngIf","title"===t),e.xp6(1),e.Q6J("ngIf","action"===t)}}function Ve(o,i){1&o&&(e.ynx(0,9),e.YNc(1,qe,2,1,"th",10),e.YNc(2,Ye,5,4,"td",11),e.BQk()),2&o&&e.Q6J("matColumnDef",i.$implicit)}function Be(o,i){1&o&&e._UZ(0,"tr",18)}function Pe(o,i){1&o&&e._UZ(0,"tr",19)}let De=(()=>{class o{constructor(t,n){this.courseInstructorService=t,this.dialog=n,this.idCourse="",this.courseInstructors=[],this.filteredCourseInstructors=[],this.filterValue="",this.columnLabels={imgUrl:"Foto",fullName:"Nombre Completo",title:"T\xedtulo",action:"Quitar instructor"},this.displayedColumns=Object.keys(this.columnLabels)}ngOnInit(){this.loadData()}ngOnChanges(){this.loadData()}loadData(){this.idCourse&&this.courseInstructorService.findByCourseId(this.idCourse).subscribe({next:t=>{this.courseInstructors=t,this.filteredCourseInstructors=t},error:t=>{console.log(t)}})}applyFilter(){const t=this.filterValue.trim().toLowerCase();this.filteredCourseInstructors=""===t?this.courseInstructors:this.courseInstructors.filter(n=>n.instructor.user.fullName.toLowerCase().includes(t)||n.instructor.title.toLowerCase().includes(t))}addInstructor(t){this.dialog.open(ke,{data:{idCourse:t}}).afterClosed().subscribe(()=>{this.loadData()})}removeInstructor(t,n){N().fire({title:"\xbfEst\xe1s seguro de quitarlo de este curso?",html:`Se quitar\xe1 al instructor <strong>${n}</strong>. \xbfDeseas continuar?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed&&this.courseInstructorService.removeById(t).subscribe({next:()=>{this.loadData()},error:s=>{console.log(s)}})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Je.c),e.Y36(_.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-course-instructors"]],inputs:{idCourse:"idCourse"},features:[e.TTD],decls:12,vars:6,consts:[[1,"full-width"],[1,"search-input"],["type","text","matInput","","placeholder","Buscar instructores de este curso...",1,"search-text",3,"ngModel","ngModelChange","input"],["mat-icon-button","","aria-label","Buscar",1,"search-icon"],[1,"addButton",3,"fontSet","click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","row-hover",4,"matCellDef"],["mat-header-cell",""],["mat-cell","",1,"row-hover"],[4,"ngIf"],["alt","Foto",1,"profile-img",3,"src"],[1,"icon-remove-container"],[3,"fontSet","click"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"mat-form-field",0)(1,"div",1)(2,"input",2),e.NdJ("ngModelChange",function(s){return n.filterValue=s})("input",function(){return n.applyFilter()}),e.qZA(),e.TgZ(3,"button",3)(4,"mat-icon"),e._uU(5,"search"),e.qZA()(),e.TgZ(6,"mat-icon",4),e.NdJ("click",function(){return n.addInstructor(n.idCourse)}),e._uU(7," add_circle "),e.qZA()()(),e.TgZ(8,"table",5),e.YNc(9,Ve,3,1,"ng-container",6),e.YNc(10,Be,1,0,"tr",7),e.YNc(11,Pe,1,0,"tr",8),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngModel",n.filterValue),e.xp6(4),e.Q6J("fontSet","material-icons-outlined"),e.xp6(2),e.Q6J("dataSource",n.filteredCourseInstructors),e.xp6(1),e.Q6J("ngForOf",n.displayedColumns),e.xp6(1),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[m.sg,m.O5,b.RK,f.KE,v.Hw,x.Nt,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,c.Fj,c.JJ,c.On],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.search-input[_ngcontent-%COMP%]{display:flex;align-items:center}.search-text[_ngcontent-%COMP%]{flex:1;border:none;box-shadow:none}.search-icon[_ngcontent-%COMP%]{margin-left:8px}.row-hover[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}.profile-img[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%}.addButton[_ngcontent-%COMP%]{cursor:pointer}.icon-remove-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.icon-remove-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:3px}"]}),o})();function Ee(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Ingrese un n\xfamero v\xe1lido"),e.qZA())}function Re(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Ingrese un t\xedtulo v\xe1lido"),e.qZA())}function je(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Ingrese un nivel de dificultad v\xe1lido"),e.qZA())}let He=(()=>{class o{constructor(t,n,r,s,l){this.data=t,this.fb=n,this.dialogRef=r,this.courseSectionService=s,this.snackBar=l,this.sectionForm=this.fb.group({sectionNumber:["",[c.kI.required,c.kI.pattern(/^\d+$/)]],title:["",[c.kI.required]],difficultyLevel:["",[c.kI.required]]}),this.courseSection={sectionNumber:"",title:"",difficultyLevel:"",course:t.idCourse}}ngOnInit(){}saveSection(){if(this.sectionForm.invalid)return;const t=this.sectionForm.value;this.data.isNewSection&&this.courseSectionService.create({sectionNumber:t.sectionNumber,title:t.title,difficultyLevel:t.difficultyLevel,course:this.courseSection.course}).subscribe(()=>{this.showSuccessToast("Secci\xf3n creada correctamente"),this.dialogRef.close()})}showSuccessToast(t){this.snackBar.open(t,"OK",{duration:3e3})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.WI),e.Y36(c.qu),e.Y36(_.so),e.Y36(h.oq),e.Y36(S.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-section-form"]],decls:25,vars:5,consts:[[1,"title-course-container"],["mat-dialog-title","",2,"text-align","center"],["mat-dialog-content",""],[3,"formGroup","ngSubmit"],["matInput","","placeholder","N\xfamero de la secci\xf3n...","formControlName","sectionNumber"],[4,"ngIf"],["matInput","","placeholder","T\xedtulo de la secci\xf3n...","formControlName","title"],["matInput","","placeholder","Nivel de dificultad...","formControlName","difficultyLevel"],[1,"button-row"],["mat-button","","color","primary","type","submit",3,"disabled"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"h2",1),e._uU(4," Nueva secci\xf3n: "),e.qZA()(),e.TgZ(5,"div",2)(6,"form",3),e.NdJ("ngSubmit",function(){return n.saveSection()}),e.TgZ(7,"mat-form-field")(8,"mat-label"),e._uU(9,"N\xfamero de secci\xf3n:"),e.qZA(),e._UZ(10,"input",4),e.YNc(11,Ee,2,0,"mat-error",5),e.qZA(),e.TgZ(12,"mat-form-field")(13,"mat-label"),e._uU(14,"T\xedtulo de la secci\xf3n:"),e.qZA(),e._UZ(15,"input",6),e.YNc(16,Re,2,0,"mat-error",5),e.qZA(),e.TgZ(17,"mat-form-field")(18,"mat-label"),e._uU(19,"Nivel de dificultad:"),e.qZA(),e._UZ(20,"input",7),e.YNc(21,je,2,0,"mat-error",5),e.qZA(),e.TgZ(22,"div",8)(23,"button",9),e._uU(24," Guardar nueva secci\xf3n "),e.qZA()()()()()()),2&t){let r,s,l;e.xp6(6),e.Q6J("formGroup",n.sectionForm),e.xp6(5),e.Q6J("ngIf",(null==(r=n.sectionForm.get("sectionNumber"))?null:r.invalid)&&(null==(r=n.sectionForm.get("sectionNumber"))?null:r.touched)),e.xp6(5),e.Q6J("ngIf",(null==(s=n.sectionForm.get("title"))?null:s.invalid)&&(null==(s=n.sectionForm.get("title"))?null:s.touched)),e.xp6(5),e.Q6J("ngIf",(null==(l=n.sectionForm.get("difficultyLevel"))?null:l.invalid)&&(null==(l=n.sectionForm.get("difficultyLevel"))?null:l.touched)),e.xp6(2),e.Q6J("disabled",n.sectionForm.invalid)}},dependencies:[m.O5,b.lW,f.KE,f.hX,f.TO,d.a8,d.dn,x.Nt,_.uh,_.xY,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}"]}),o})();var Q=a(6385),y=a(3305);const $e=["myEditor"];function Ke(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese un n\xfamero v\xe1lido "),e.qZA())}function Ge(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese una URL v\xe1lida "),e.qZA())}function Xe(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese un titulo v\xe1lido "),e.qZA())}function ze(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese un id del v\xeddeo v\xe1lido "),e.qZA())}function We(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese un link v\xe1lido "),e.qZA())}function et(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese un link v\xe1lido "),e.qZA())}function tt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese una descripci\xf3n v\xe1lida "),e.qZA())}const ot=function(){return[]},it=function(o){return{height:200,menubar:!1,plugins:o,toolbar:"undo redo | formatselect | bold italic backcolor | \n         alignleft aligncenter alignright alignjustify | \n         bullist numlist outdent indent | removeformat | help"}};let O=(()=>{class o{constructor(t,n,r,s,l){this.data=t,this.fb=n,this.videoCourseService=r,this.videoCourseSectionService=s,this.dialogRef=l,this.apiKey=L.a.tinyApi,this.videoCourse={number:0,title:"",link:"",description:"",url:"",thumbnailUrl:"",previewAnimation:""},this.newVideoId=""}ngOnInit(){this.videoForm=this.fb.group({number:["",[c.kI.required,c.kI.pattern(/^\d+$/)]],url:["",[c.kI.required]],title:["",[c.kI.required]],link:["",[c.kI.required]],thumbnailUrl:["",[c.kI.required]],previewAnimation:["",[c.kI.required]],description:["",[c.kI.required]]}),!this.data.isNewVideo&&this.data.idVideo&&this.videoCourseService.findById(this.data.idVideo).subscribe(t=>{this.videoCourse=t,this.populateFormWithVideoData()})}populateFormWithVideoData(){this.videoForm.patchValue({number:this.videoCourse.number,title:this.videoCourse.title,url:this.videoCourse.url,link:this.videoCourse.link,description:this.videoCourse.description,thumbnailUrl:this.videoCourse.thumbnailUrl,previewAnimation:this.videoCourse.previewAnimation})}saveVideo(){if(this.videoForm.valid){const t={...this.videoCourse,idVideo:void 0,status:void 0};t.number=this.videoForm.value.number,t.title=this.videoForm.value.title,t.url=this.videoForm.value.url,t.description=this.videoForm.value.description,t.link=this.videoForm.value.link,t.thumbnailUrl=this.videoForm.value.thumbnailUrl,t.previewAnimation=this.videoForm.value.previewAnimation,this.data.isNewVideo?this.videoCourseService.create(t).subscribe(r=>{this.videoCourseSectionService.create({sectionCourse:this.data.idSection,videoCourse:r.idVideo}).subscribe(()=>{this.dialogRef.close()})}):this.videoCourseService.updateById(this.data.idVideo,t).subscribe(()=>{this.dialogRef.close()})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.WI),e.Y36(c.qu),e.Y36(h.i2),e.Y36(h.b3),e.Y36(_.so))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-video-form"]],viewQuery:function(t,n){if(1&t&&e.Gf($e,5),2&t){let r;e.iGM(r=e.CRH())&&(n.myEditor=r.first)}},decls:39,vars:15,consts:[["mat-dialog-content",""],[3,"formGroup","ngSubmit"],["matInput","","placeholder","N\xfamero del video...","formControlName","number"],[4,"ngIf"],["matInput","","placeholder","Url del video...","formControlName","url"],["matInput","","placeholder","Titulo para el video...","formControlName","title"],["matInput","","placeholder","Link del servidor del video...","formControlName","link"],["matInput","","placeholder","Link del Thumbnail del video...","formControlName","thumbnailUrl"],["matInput","","placeholder","Link del Preview Animation del video...","formControlName","previewAnimation"],["formControlName","description",3,"apiKey","init"],["myEditor",""],[1,"button-row"],["mat-button","","color","primary","type","submit",3,"disabled"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return n.saveVideo()}),e.TgZ(2,"mat-form-field")(3,"mat-label"),e._uU(4,"N\xfamero del video:"),e.qZA(),e._UZ(5,"input",2),e.YNc(6,Ke,2,0,"mat-error",3),e.qZA(),e.TgZ(7,"mat-form-field")(8,"mat-label"),e._uU(9,"Slug (URL) para ver el v\xeddeo:"),e.qZA(),e._UZ(10,"input",4),e.YNc(11,Ge,2,0,"mat-error",3),e.qZA(),e.TgZ(12,"mat-form-field")(13,"mat-label"),e._uU(14,"Titulo del video:"),e.qZA(),e._UZ(15,"input",5),e.YNc(16,Xe,2,0,"mat-error",3),e.qZA(),e.TgZ(17,"mat-form-field")(18,"mat-label"),e._uU(19,"Id del video (Hosting):"),e.qZA(),e._UZ(20,"input",6),e.YNc(21,ze,2,0,"mat-error",3),e.qZA(),e.TgZ(22,"mat-form-field")(23,"mat-label"),e._uU(24,"Thumbnail link:"),e.qZA(),e._UZ(25,"input",7),e.YNc(26,We,2,0,"mat-error",3),e.qZA(),e.TgZ(27,"mat-form-field")(28,"mat-label"),e._uU(29,"Preview Animation link:"),e.qZA(),e._UZ(30,"input",8),e.YNc(31,et,2,0,"mat-error",3),e.qZA(),e.TgZ(32,"div"),e._UZ(33,"editor",9,10),e.YNc(35,tt,2,0,"mat-error",3),e.qZA(),e.TgZ(36,"div",11)(37,"button",12),e._uU(38),e.qZA()()()()),2&t){let r,s,l,p,g,Z,I;e.xp6(1),e.Q6J("formGroup",n.videoForm),e.xp6(5),e.Q6J("ngIf",(null==(r=n.videoForm.get("number"))?null:r.invalid)&&(null==(r=n.videoForm.get("number"))?null:r.touched)),e.xp6(5),e.Q6J("ngIf",(null==(s=n.videoForm.get("url"))?null:s.invalid)&&(null==(s=n.videoForm.get("url"))?null:s.touched)),e.xp6(5),e.Q6J("ngIf",(null==(l=n.videoForm.get("title"))?null:l.invalid)&&(null==(l=n.videoForm.get("title"))?null:l.touched)),e.xp6(5),e.Q6J("ngIf",(null==(p=n.videoForm.get("link"))?null:p.invalid)&&(null==(p=n.videoForm.get("link"))?null:p.touched)),e.xp6(5),e.Q6J("ngIf",(null==(g=n.videoForm.get("thumbnailUrl"))?null:g.invalid)&&(null==(g=n.videoForm.get("thumbnailUrl"))?null:g.touched)),e.xp6(5),e.Q6J("ngIf",(null==(Z=n.videoForm.get("previewAnimation"))?null:Z.invalid)&&(null==(Z=n.videoForm.get("previewAnimation"))?null:Z.touched)),e.xp6(2),e.Q6J("apiKey",n.apiKey)("init",e.VKq(13,it,e.DdM(12,ot))),e.xp6(2),e.Q6J("ngIf",(null==(I=n.videoForm.get("description"))?null:I.invalid)&&(null==(I=n.videoForm.get("description"))?null:I.touched)),e.xp6(2),e.Q6J("disabled",n.videoForm.invalid),e.xp6(1),e.hij(" ",n.data.isNewVideo?"Guardar nuevo video":"Guardar cambios"," ")}},dependencies:[m.O5,b.lW,f.KE,f.hX,f.TO,x.Nt,_.xY,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,F.PG],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}"]}),o})();function rt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"mat-list-item",3),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onVideoClick(s.idVideo))}),e.TgZ(2,"div",4),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.removeVideo(s.idVideo,s.number.toString(),s.title))}),e.TgZ(6,"mat-icon"),e._uU(7,"do_not_disturb_on"),e.qZA()()(),e._UZ(8,"mat-divider"),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(3),e.AsE("",t.number," - ",e.lcZ(4,2,t.title),"")}}let st=(()=>{class o{constructor(t,n,r,s){this.courseVideoSectionService=t,this.dialog=n,this.snackBar=r,this.videoPreviewService=s,this.sectionId="",this.videosSection=[]}ngOnInit(){this.fetchVideosBySectionId()}fetchVideosBySectionId(){this.courseVideoSectionService.findBySectionId(this.sectionId).subscribe(t=>{this.videosSection=t.map(n=>n.videoCourse).sort((n,r)=>n.number-r.number)})}removeVideo(t,n,r){N().fire({title:`\xbfEst\xe1 seguro de borrar el video ${n} - ${r}?`,text:"Esta acci\xf3n es irreversible.",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, borrar",cancelButtonText:"Cancelar"}).then(s=>{s.isConfirmed&&this.courseVideoSectionService.findBySectionId(this.sectionId).subscribe(l=>{const p=l.find(g=>g.videoCourse.idVideo===t);p&&this.courseVideoSectionService.removeById(p.idSectionCourseVideo).subscribe(()=>{this.fetchVideosBySectionId(),this.snackBar.open(`Video ${n} - ${r} removido de la secci\xf3n correctamente.`,"OK",{duration:3e3})})})})}addVideo(){this.dialog.open(O,{data:{isNewVideo:!0,idSection:this.sectionId}}).afterClosed().subscribe(()=>{this.fetchVideosBySectionId(),this.snackBar.open("Video creado correctamente","OK",{duration:3e3})})}onVideoClick(t){this.videoPreviewService.videoPreviewClicked(t,this.sectionId)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.b3),e.Y36(_.uw),e.Y36(S.ux),e.Y36(h.dP))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-course-video-list"]],inputs:{sectionId:"sectionId"},decls:7,vars:1,consts:[[3,"click"],[1,"btn-add-video"],[4,"ngFor","ngForOf"],[1,"mat-list-item-container",3,"click"],["matListItemTitle",""],["mat-icon-button","","matListItemMeta","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-list-item",0),e.NdJ("click",function(){return n.addVideo()}),e.TgZ(1,"div",1)(2,"mat-icon"),e._uU(3,"add"),e.qZA(),e.TgZ(4,"mat-card-subtitle"),e._uU(5," Agregar un nuevo video "),e.qZA()()(),e.YNc(6,rt,9,4,"div",2)),2&t&&(e.xp6(6),e.Q6J("ngForOf",n.videosSection))},dependencies:[m.sg,b.RK,v.Hw,C.Tg,Q.d,C.sL,C.ni,d.$j,m.rS],styles:[".mat-list-item-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around}.btn-add-video[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;justify-content:center}"]}),o})();function ct(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",7),e.NdJ("opened",function(){const s=e.CHM(t).$implicit;return e.KtG(s.panelOpenState=!0)})("closed",function(){const s=e.CHM(t).$implicit;return e.KtG(s.panelOpenState=!1)}),e.TgZ(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e.TgZ(5,"mat-panel-description",8),e._uU(6),e.ALo(7,"titlecase"),e.TgZ(8,"div",9),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.removeSection(s.sectionCourseId,s.title,s.sectionNumber))}),e.TgZ(9,"mat-icon"),e._uU(10,"do_not_disturb_on"),e.qZA()()(),e._UZ(11,"mat-divider"),e.qZA(),e.TgZ(12,"mat-list"),e._UZ(13,"app-course-video-list",10),e.qZA()()}if(2&o){const t=i.$implicit;e.Q6J("expanded",t.panelOpenState),e.xp6(3),e.AsE(" ",t.sectionNumber," - ",e.lcZ(4,5,t.title)," "),e.xp6(3),e.hij(" ",e.lcZ(7,7,t.difficultyLevel)," "),e.xp6(7),e.Q6J("sectionId",t.sectionCourseId)}}let lt=(()=>{class o{constructor(t,n,r){this.courseSectionService=t,this.dialog=n,this.snackBar=r,this.courseId="",this.sectionsCourse=[]}ngOnInit(){this.fetchSectionsByCourseId()}ngOnChanges(t){t.courseId&&!t.courseId.isFirstChange()&&this.fetchSectionsByCourseId()}fetchSectionsByCourseId(){""!==this.courseId&&this.courseSectionService.findByCourseId(this.courseId).subscribe(t=>{this.sectionsCourse=t.map(n=>({...n,panelOpenState:!0})),this.sectionsCourse.sort((n,r)=>n.sectionNumber.localeCompare(r.sectionNumber))})}removeSection(t,n,r){N().fire({title:`\xbfEst\xe1 seguro de borrar la secci\xf3n ${r} - ${n}?`,text:"Esta acci\xf3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed",cancelButtonText:"Cancelar"}).then(s=>{s.isConfirmed&&this.courseSectionService.removeById(t).subscribe(l=>{this.fetchSectionsByCourseId(),this.showSuccessToast("Secci\xf3n borrada correctamente.")})})}addSection(){this.dialog.open(He,{data:{isNewSection:!0,idCourse:this.courseId}}).afterClosed().subscribe(n=>{this.fetchSectionsByCourseId(),n&&this.showSuccessToast("Secci\xf3n creada con \xe9xito")})}showSuccessToast(t){this.snackBar.open(t,"OK",{duration:3e3})}refreshVideos(){this.fetchSectionsByCourseId()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.oq),e.Y36(_.uw),e.Y36(S.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-course-sections"]],inputs:{courseId:"courseId"},features:[e.TTD],decls:20,vars:3,consts:[[1,"p-3","d-flex","align-items-center","justify-content-center"],[1,"mr-2"],["matListItemIcon","",1,"icon-title",3,"fontSet"],[1,"subtitle-container",3,"click"],[1,"refresh-button",3,"click"],[3,"multi"],[3,"expanded","opened","closed",4,"ngFor","ngForOf"],[3,"expanded","opened","closed"],[1,"panel-description-container"],[2,"display","flex","align-items","center",3,"click"],[3,"sectionId"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card-header",0)(1,"div",1)(2,"mat-icon",2),e._uU(3,"list_alt"),e.qZA()(),e.TgZ(4,"div")(5,"mat-card-title"),e._uU(6,"Secciones:"),e.qZA()()(),e.TgZ(7,"mat-card-content")(8,"div",3),e.NdJ("click",function(){return n.addSection()}),e.TgZ(9,"mat-icon"),e._uU(10,"add"),e.qZA(),e.TgZ(11,"mat-card-subtitle"),e._uU(12," Agregar una nueva secci\xf3n "),e.qZA()(),e.TgZ(13,"div",4),e.NdJ("click",function(){return n.refreshVideos()}),e.TgZ(14,"mat-icon"),e._uU(15,"refresh"),e.qZA(),e.TgZ(16,"mat-card-subtitle"),e._uU(17," Recargar lista de videos "),e.qZA()(),e.TgZ(18,"mat-accordion",5),e.YNc(19,ct,14,9,"mat-expansion-panel",6),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("fontSet","material-icons-outlined"),e.xp6(16),e.Q6J("multi",!0),e.xp6(1),e.Q6J("ngForOf",n.sectionsCourse))},dependencies:[m.sg,v.Hw,C.i$,C.Yt,Q.d,d.dn,d.dk,d.$j,d.n5,y.pp,y.ib,y.yz,y.yK,y.u4,st,m.rS],styles:[".mat-mdc-form-field[_ngcontent-%COMP%] + .mat-mdc-form-field[_ngcontent-%COMP%]{margin-left:8px}.panel-description-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center}.subtitle-container[_ngcontent-%COMP%], .refresh-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer;margin-bottom:1em}"]}),o})();var at=a(6593);function ut(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"mat-card")(2,"mat-card-content",1),e._UZ(3,"div",2),e.TgZ(4,"mat-card-title",3),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editVideo(r.video.idVideo))}),e._uU(5),e.ALo(6,"titlecase"),e.TgZ(7,"mat-icon"),e._uU(8,"edit"),e.qZA(),e._uU(9," Editar video"),e.qZA(),e._UZ(10,"div",4),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("innerHTML",t.getSafeHTMLContent(),e.oJD),e.xp6(2),e.hij("",e.lcZ(6,3,t.video.title)," - "),e.xp6(5),e.Q6J("innerHTML",t.video.description,e.oJD)}}let dt=(()=>{class o{constructor(t,n,r,s){this.videoPreviewService=t,this.courseVideoService=n,this.dialog=r,this.sanitizer=s,this.videoUpdated=new e.vpe,this.mensajeClicked=new e.vpe,this.videoId="",this.sectionId="",this.video={number:0,title:"",url:"",link:"",description:"",thumbnailUrl:"",previewAnimation:"",status:!1},this.subscription=this.videoPreviewService.videoClicked$.subscribe(l=>{const{idVideo:p,idSection:g}=l;this.videoId=p,this.sectionId=g,this.courseVideoService.findById(p).subscribe(Z=>this.video=Z)})}ngOnDestroy(){this.subscription.unsubscribe()}editVideo(t=""){this.dialog.open(O,{data:{isNewVideo:""===t,idSection:this.sectionId,idVideo:t}}).afterClosed().subscribe(r=>{this.courseVideoService.findById(t).subscribe(s=>{this.video=s,this.videoUpdated.emit()})})}addFile(){}getSafeHTMLContent(){return this.sanitizer.bypassSecurityTrustHtml(`<div style="position:relative;padding-top:56.25%;"><iframe src="https://iframe.mediadelivery.net/embed/163809/${this.video.link}?autoplay=true&loop=false&muted=false&preload=true" loading="lazy" style="border:0;position:absolute;top:0;height:100%;width:100%;" allow="accelerometer;gyroscope;autoplay;encrypted-media;picture-in-picture;" allowfullscreen="true"></iframe></div>`)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.dP),e.Y36(h.i2),e.Y36(_.uw),e.Y36(at.H7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-video-preview"]],outputs:{videoUpdated:"videoUpdated",mensajeClicked:"mensajeClicked"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"preserve-line-breaks"],[3,"innerHTML"],[1,"editVideo",3,"click"],[1,"video-description",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,ut,11,5,"div",0),2&t&&e.Q6J("ngIf",""!=n.videoId)},dependencies:[m.O5,v.Hw,d.a8,d.dn,d.n5,m.rS],styles:[".mat-card-header-text-centered[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.editVideo[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center}.file-item[_ngcontent-%COMP%]{display:flex;align-items:center}.btn-add-file[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;justify-content:center}.video-description[_ngcontent-%COMP%]{padding:15px}"]}),o})();function mt(o,i){if(1&o&&(e.TgZ(0,"div",2)(1,"mat-card")(2,"mat-card-header",10)(3,"div",11)(4,"mat-icon",12),e._uU(5,"price_change"),e.qZA()(),e.TgZ(6,"div")(7,"mat-card-title"),e._uU(8,"Instructores del curso:"),e.qZA()()(),e.TgZ(9,"mat-card-content"),e._UZ(10,"app-course-instructors",13),e.qZA()()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("fontSet","material-icons-outlined"),e.xp6(6),e.Q6J("idCourse",t.idCourse)}}function pt(o,i){if(1&o&&(e.TgZ(0,"div",14)(1,"mat-card"),e._UZ(2,"app-course-sections",15,16),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("courseId",t.idCourse)}}function _t(o,i){1&o&&(e.TgZ(0,"div",14)(1,"mat-card")(2,"mat-card-header",10)(3,"div",11)(4,"mat-icon",17),e._uU(5,"play_circle"),e.qZA()(),e.TgZ(6,"div")(7,"mat-card-title"),e._uU(8,"Vista previa:"),e.qZA()()(),e.TgZ(9,"mat-card-content"),e._UZ(10,"app-video-preview"),e.qZA()()()),2&o&&(e.xp6(4),e.Q6J("fontSet","material-icons-outlined"))}const ft=[{path:"",component:E,children:[{path:"cursos",component:te},{path:"cursos/:slug",component:(()=>{class o{constructor(t,n,r){this.activatedRoute=t,this.router=n,this.courseService=r,this.courseSlug="",this.idCourse="",this.refreshCourseVideos=!1}ngOnInit(){this.courseSlug=this.activatedRoute.snapshot.params.slug,"nuevo-curso"!==this.courseSlug&&this.courseService.findBySlug(this.courseSlug).pipe((0,se.U)(t=>t.idCourse)).subscribe(t=>{this.idCourse=t})}arrowBack(){this.router.navigate(["/studio/cursos/"])}onVideoUpdated(){this.refreshCourseVideos=!this.refreshCourseVideos}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.gz),e.Y36(T.F0),e.Y36(h.No))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-course-layout"]],decls:15,vars:5,consts:[[1,"container"],[1,"grid","p-3"],[1,"col-12","md:col-12","lg:col-6"],[1,"p-3","d-flex"],[1,"mr-2","arrow-back",3,"click"],["matListItemIcon","",3,"fontSet"],[3,"courseSlug"],["class","col-12 md:col-12 lg:col-6",4,"ngIf"],["class","col-12 md:col-6 lg:col-6",4,"ngIf"],["class"," col-12 md:col-6 lg:col-6",4,"ngIf"],[1,"p-3","d-flex","align-items-center","justify-content-center"],[1,"mr-2"],["matListItemIcon","",1,"icon-title",3,"fontSet"],[3,"idCourse"],[1,"col-12","md:col-6","lg:col-6"],[3,"courseId"],["courseSections",""],["matListItemIcon","",2,"padding-top","2.4px",3,"fontSet"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card")(4,"mat-card-header",3)(5,"div",4),e.NdJ("click",function(){return n.arrowBack()}),e.TgZ(6,"mat-icon",5),e._uU(7," arrow_back "),e.qZA(),e._uU(8," Ver todos los cursos "),e.qZA()(),e.TgZ(9,"mat-card-content"),e._UZ(10,"app-course-form",6),e.qZA()()(),e.YNc(11,mt,11,2,"div",7),e.qZA(),e.TgZ(12,"div",1),e.YNc(13,pt,4,1,"div",8),e.YNc(14,_t,11,1,"div",9),e.qZA()()),2&t&&(e.xp6(6),e.Q6J("fontSet","material-icons-outlined"),e.xp6(4),e.Q6J("courseSlug",n.courseSlug),e.xp6(1),e.Q6J("ngIf","nuevo-curso"!==n.courseSlug),e.xp6(2),e.Q6J("ngIf","nuevo-curso"!==n.courseSlug),e.xp6(1),e.Q6J("ngIf","nuevo-curso"!==n.courseSlug))},dependencies:[m.O5,v.Hw,C.Yt,d.a8,d.dn,d.dk,d.n5,Ze,De,lt,dt],styles:[".arrow-back[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left;cursor:pointer}.container[_ngcontent-%COMP%]{background-color:#141b1f}.icon-title[_ngcontent-%COMP%]{padding-top:3px}.subtitle-container[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;justify-content:center;margin-bottom:1em}"]}),o})()},{path:"escuelas",component:ne},{path:"rutas",component:re},{path:"**",redirectTo:""}]}];let gt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[T.Bz.forChild(ft),T.Bz]}),o})();var k=a(6889);let M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[h.dP],imports:[m.ez,k.q,T.Bz,c.UX,c.u5,F.Z_,F.Z_]}),o})(),Ct=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,k.q,M]}),o})(),ht=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,gt,k.q,Ct,M]}),o})()}}]);